<!doctype html>
<html lang="zh" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>登录 · 库存控制中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: ['class'],
        theme: {
          extend: {
            fontFamily: {
              sans: ['ui-sans-serif','-apple-system','BlinkMacSystemFont','Segoe UI','PingFang SC','Hiragino Sans GB','Microsoft Yahei','Helvetica Neue','Arial','Noto Sans CJK SC','sans-serif']
            },
            colors: {
              brand: {
                50: '#F4F6FF',
                100: '#E9EDFF',
                200: '#C7D0FF',
                300: '#A4B4FF',
                400: '#8097FF',
                500: '#5D7BFF',
                600: '#3A5EFF',
                700: '#2447E6',
                800: '#1B34B0',
                900: '#14257F'
              }
            },
            boxShadow: {
              xlsoft: '0 25px 80px rgba(15, 23, 42, .16)'
            }
          }
        }
      }
    </script>
    <style>
      :root { color-scheme: light dark; }
      html, body { height: 100%; }
    </style>
  </head>
  <body class="min-h-full bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 font-sans antialiased">
    <main class="min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
      <div class="max-w-md w-full space-y-8">
        <div class="text-center space-y-3">
          <span class="inline-flex items-center gap-2 text-xs px-2 py-1 rounded-full bg-white/70 dark:bg-white/10 border border-white/40 dark:border-white/10 text-slate-700 dark:text-slate-200">
            库存控制中心 <span class="opacity-60">安全登录</span>
          </span>
          <h1 class="text-3xl font-bold tracking-tight">欢迎回来</h1>
          <p class="text-sm text-slate-500 dark:text-slate-400">请使用您的账号登录，继续管理库存。</p>
        </div>
        <form method="post" class="mt-8 space-y-6 rounded-2xl border border-slate-200/60 dark:border-white/10 bg-white/80 dark:bg-slate-900/60 backdrop-blur px-6 py-8 shadow-xlsoft">
          {% if error %}
            <div class="rounded-lg border border-red-300/60 bg-red-50 text-red-600 px-3 py-2 text-sm dark:border-red-500/40 dark:bg-red-900/30 dark:text-red-200">
              {{ error }}
            </div>
          {% endif %}
          <div class="space-y-4">
            <label class="block text-left">
              <span class="text-sm text-slate-500">用户名</span>
              <input type="text" name="username" autocomplete="username" required class="mt-1 w-full rounded-xl border border-slate-200/60 dark:border-white/10 bg-slate-100/70 dark:bg-white/5 px-3 py-2 focus:outline-none focus:ring-4 ring-brand-500/20 focus:border-brand-500/60" placeholder="请输入用户名" />
            </label>
            <label class="block text-left">
              <span class="text-sm text-slate-500">密码</span>
              <input type="password" name="password" autocomplete="current-password" required class="mt-1 w-full rounded-xl border border-slate-200/60 dark:border-white/10 bg-slate-100/70 dark:bg-white/5 px-3 py-2 focus:outline-none focus:ring-4 ring-brand-500/20 focus:border-brand-500/60" placeholder="请输入密码" />
            </label>
            {% if next %}
              <input type="hidden" name="next" value="{{ next }}" />
            {% endif %}
          </div>
          <div class="flex items-center justify-between text-xs text-slate-400">
            <span>默认超级管理员：admin / admin</span>
            <button type="button" id="themeSwitch" class="px-2 py-1 rounded-lg border border-slate-200/60 dark:border-white/10 hover:bg-slate-100/70 dark:hover:bg-white/5">切换主题</button>
          </div>
          <div>
            <button type="submit" class="w-full h-11 rounded-xl bg-brand-600 text-white font-medium hover:brightness-105 transition">登录</button>
          </div>
        </form>
      </div>
    </main>
    <script>
      const root = document.documentElement;
      const stored = localStorage.getItem('theme');
      if (stored) {
        root.classList.toggle('dark', stored === 'dark');
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        root.classList.add('dark');
      }
      document.getElementById('themeSwitch')?.addEventListener('click', () => {
        const isDark = root.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    </script>
  </body>
</html>
